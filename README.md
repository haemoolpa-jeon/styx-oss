# 🎵 Styx v1.2.0

HADES를 위한 실시간 오디오 협업 플랫폼

## ✨ v1.2.0 주요 기능

### 🎵 고품질 오디오
- **스테레오 오디오** - 모노에서 스테레오로 업그레이드된 고품질 사운드
- **AI 노이즈 제거** - RNNoise WASM 기반 실시간 노이즈 제거
- **동적 범위 압축** - 사용자 간 자동 음량 균형 조절
- **공간 오디오** - 스테레오 패닝으로 몰입감 있는 오디오 경험
- **실시간 주파수 분석** - 스펙트럼 분석기로 오디오 주파수 시각화
- **오디오 라우팅** - 스테레오/좌측/우측/모노 믹스 유연한 라우팅
- **노이즈 프로파일링** - 사용자 환경을 학습하여 자동 노이즈 게이트 조절

### 🎛️ 전문 기능
- **향상된 키보드 단축키** - 20개 이상의 포괄적인 단축키 시스템
- **고급 오디오 이펙트** - 3밴드 EQ, 딜레이, 압축 효과
- **멀티트랙 녹음** - 각 참가자를 개별 파일로 녹음
- **화면 공유** - getDisplayMedia를 활용한 화면/악보 공유
- **역할 시스템** - 호스트/연주자/청취자 역할 구분

### 👥 사용자 관리
- **사용자 승인 시스템** - 관리자 승인 워크플로우로 향상된 보안
- **관리자 패널 강화** - 모니터링 및 로그 기능 추가
- **전문적인 사용자 관리** - 검색 및 제어 기능이 포함된 사용자 카드
- **자체 통계 표시** - 본인의 연결 상태 (지연시간, 대역폭, 패킷 손실) 확인

### 🔒 보안 및 성능
- **향상된 보안 로깅** - 모든 보안 이벤트에 대한 감사 추적
- **GDPR 준수** - 데이터 내보내기/삭제 기능으로 개인정보보호 강화
- **고급 속도 제한** - 의심스러운 IP 추적 및 자동 차단
- **상태 모니터링** - 메트릭 엔드포인트로 시스템 상태 실시간 확인
- **대역폭 적응** - 연결 품질에 따른 자동 품질 조절

### ♿ 접근성 및 사용자 경험
- **WCAG 2.1 AA 준수** - 스크린 리더 지원 및 접근성 개선
- **고대비 모드** - 시각 장애인을 위한 고대비 테마
- **전문적인 UI 개선** - 애니메이션 및 마이크로 인터랙션 추가
- **향상된 타이포그래피** - 개선된 글꼴 및 간격 시스템

## 기본 기능

### 오디오
- **실시간 P2P 오디오** - WebRTC 기반 저지연 스트리밍
- **최대 8명** - 방당 최대 8명 동시 접속
- **TURN 서버** - NAT/방화벽 뒤에서도 안정적 연결
- **개별 볼륨 조절** - 사용자별 볼륨/팬/뮤트/솔로
- **음성/음악 모드** - 용도에 맞는 오디오 최적화

### 네트워크
- **연결 테스트** - 마이크/스피커/네트워크 품질 측정
- **Wi-Fi 경고** - 유선 연결 권장 메시지
- **자동 지터 버퍼** - 네트워크 상태에 따라 자동 조절
- **연결 유형 표시** - 직접/STUN/TURN 연결 상태

### 메트로놈
- **공유 메트로놈** - 방 전체 BPM 동기화
- **서버 시간 동기화** - 정확한 박자 맞춤
- **카운트인** - 4박 카운트 후 시작

### 방 기능
- **방 브라우저** - 활성 방 목록
- **비공개 방** - 비밀번호 설정
- **채팅** - 방 내 텍스트 채팅

## 빠른 시작

```bash
git clone https://github.com/haemoolpa-jeon/styx.git
cd styx
npm install
npm run setup    # 관리자 계정 생성
npm start        # 서버 시작
```

브라우저에서 `http://localhost:3000` 접속

**기본 관리자**: `admin` / `admin123` (첫 로그인 후 변경 필수!)

## 서버 주소

- **웹**: https://3-39-223-2.nip.io
- **TURN**: 3.39.223.2:3478

## 키보드 단축키

### 기본 제어
| 키 | 기능 |
|----|------|
| M | 음소거 토글 |
| Space | 메트로놈 토글 |
| R | 녹음 토글 |
| B | 녹음 마커 추가 |
| I | 초대 링크 복사 |
| Esc | 방 나가기 |

### 오디오 제어
| 키 | 기능 |
|----|------|
| V | 음성 감지 토글 |
| T | 튜너 토글 |
| L | 저지연 모드 토글 |
| E | 에코 제거 토글 |
| N | 노이즈 억제 토글 |

### 볼륨 제어
| 키 | 기능 |
|----|------|
| ↑ | 마스터 볼륨 증가 |
| ↓ | 마스터 볼륨 감소 |
| ← | 입력 볼륨 감소 |
| → | 입력 볼륨 증가 |

### 피어 제어
| 키 | 기능 |
|----|------|
| 1-8 | 해당 피어 음소거 토글 |

### 전역 단축키
| 키 | 기능 |
|----|------|
| F1 또는 ? | 도움말 표시 |
| F11 | 전체화면 토글 |
| Ctrl+S | 설정 저장 |
| Ctrl+O | 설정 열기 |

### 접근성
| 키 | 기능 |
|----|------|
| Ctrl+Alt+H | 고대비 모드 |
| Ctrl+Alt+S | 스크린 리더 모드 |
| Ctrl+Alt+M | 애니메이션 감소 |

## 파일 구조

```
styx/
├── server/index.js       # 시그널링 서버
├── shared/client/        # 공유 클라이언트 코드
├── client/config.js      # 웹 버전 설정
├── styx-desktop/         # Tauri 데스크톱 앱
├── docs/                 # 문서
└── .env.example          # 환경변수 예시
```

## 아키텍처

```
┌─────────┐                           ┌─────────┐
│ User A  │◄──── WebRTC P2P 오디오 ───►│ User B  │
└────┬────┘                           └────┬────┘
     │                                      │
     │    ┌─────────────────────────┐      │
     └───►│   Styx 서버 (서울)       │◄─────┘
          │  • Socket.IO 시그널링    │
          │  • 방/채팅/메트로놈       │
          │  • TURN 자격증명 발급    │
          └───────────┬─────────────┘
                      │
          ┌───────────▼─────────────┐
          │   Coturn TURN 서버      │
          │  • NAT 통과 릴레이       │
          │  • UDP/TCP 3478         │
          └─────────────────────────┘
```

## 문서

- [사용 설명서](docs/USER_MANUAL.md)
- [배포 가이드](docs/AWS_LIGHTSAIL_DEPLOY.md)
- [테스트 가이드](docs/TESTING_GUIDE.md)
- [HADES 소개](docs/HADES_STYX_소개.md)

## 라이선스

HADES 전용 - 비공개 사용
