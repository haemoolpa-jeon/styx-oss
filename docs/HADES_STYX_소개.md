# 🎵 Styx - HADES 전용 실시간 오디오 협업 플랫폼

## Styx가 뭔가요?

Styx는 우리 HADES 멤버들이 **온라인에서 함께 음악을 연주**할 수 있도록 만든 프로그램입니다. 
마치 같은 방에서 합주하는 것처럼, 인터넷을 통해 실시간으로 서로의 소리를 들으며 연주할 수 있어요.

---

## 왜 직접 만들었나요?

### 기존 서비스들의 문제점

**SyncRoom (야마하)**
- 일본 서버 위주라 한국에서 지연이 큼
- 무료 버전은 기능 제한
- 커스터마이징 불가능

**SonoBus**
- 설정이 복잡함
- 서버를 직접 운영해야 함
- UI가 직관적이지 않음

**Discord / Zoom**
- 음악용이 아니라 지연이 100ms 이상
- 음질 압축이 심함
- 합주에는 사실상 사용 불가

### Styx의 장점

| 항목 | 기존 서비스 | Styx |
|------|------------|------|
| 지연 시간 | 50~150ms | **20~40ms 목표** |
| 서버 위치 | 해외 | **우리가 선택 가능** |
| 사용자 수 | 제한적 | **8명 (우리 딱 맞음)** |
| 비용 | 유료 or 광고 | **무료 (우리꺼니까)** |
| 커스터마이징 | 불가능 | **원하는 대로** |

---

## 현재 완성된 기능들

### 🌐 웹 버전 (v2.3) - 지금 바로 사용 가능!

**기본 기능**
- 방 만들기 / 입장 (비밀번호 설정 가능)
- 실시간 음성 통화 (WebRTC)
- 채팅
- 메트로놈 동기화 (모두가 같은 박자!)

**오디오 설정**
- 마이크/스피커 선택
- 개인별 볼륨 조절
- 음성 모드 / 음악 모드 전환
- 에코 제거, 노이즈 제거 ON/OFF
- PTT (Push-to-Talk) 모드

**편의 기능**
- 다크/라이트 테마
- 연결 품질 표시
- 핑 그래프
- 세션 녹음
- 초대 링크 생성

### 🖥️ 데스크톱 앱 (개발 중)

웹 버전보다 **더 낮은 지연**을 위해 데스크톱 앱을 개발 중입니다.

**왜 데스크톱 앱이 더 빠른가요?**

```
웹 버전 경로:
마이크 → 브라우저 → WebRTC → 인터넷 → WebRTC → 브라우저 → 스피커
        (여기서 지연 발생)              (여기서도 지연)

데스크톱 앱 경로:
마이크 → ASIO 드라이버 → UDP 직접 전송 → ASIO 드라이버 → 스피커
        (지연 최소화)                    (지연 최소화)
```

**데스크톱 앱 추가 기능**
- ASIO 드라이버 지원 (오디오 인터페이스 사용자용)
- Custom UDP 모드 (WebRTC보다 빠름)
- Opus 코덱 (고음질 + 저대역폭)
- 시스템 트레이 상주
- 글로벌 단축키 (Ctrl+Shift+M = 음소거)

---

## 기술적인 이야기 (관심 있는 분들만)

### 아키텍처

```
┌─────────────────────────────────────────────────────┐
│                    Styx 서버                         │
│  - 사용자 인증 (화이트리스트)                         │
│  - 방 관리                                           │
│  - 시그널링 (누가 어디 있는지 알려줌)                  │
│  - 채팅, 메트로놈 동기화                              │
└─────────────────────────────────────────────────────┘
                         │
         ┌───────────────┼───────────────┐
         │               │               │
         ▼               ▼               ▼
    ┌─────────┐    ┌─────────┐    ┌─────────┐
    │ 멤버 A  │◄──►│ 멤버 B  │◄──►│ 멤버 C  │
    └─────────┘    └─────────┘    └─────────┘
         │               │               │
         └───────────────┴───────────────┘
                    P2P 오디오
              (서버 안 거치고 직접 연결)
```

**핵심 포인트**: 오디오는 서버를 거치지 않고 **멤버끼리 직접** 주고받습니다.
서버는 "누가 방에 있는지"만 알려주고, 실제 소리는 P2P로 전송돼요.

### 사용 기술

| 구분 | 기술 | 설명 |
|------|------|------|
| 웹 프론트엔드 | HTML/CSS/JS | 별도 프레임워크 없이 가볍게 |
| 웹 오디오 | WebRTC | 브라우저 표준 실시간 통신 |
| 서버 | Node.js + Socket.IO | 실시간 이벤트 처리 |
| 데스크톱 앱 | Tauri + Rust | Electron보다 가볍고 빠름 |
| 오디오 코덱 | Opus | 음악에 최적화된 코덱 |
| 저지연 오디오 | ASIO + cpal | 전문 오디오 드라이버 지원 |

---

## 앞으로의 계획

### 단기 (1~2주)
- [ ] Windows 데스크톱 앱 첫 테스트 버전
- [ ] STUN 서버 연동 (NAT 뒤에서도 연결)
- [ ] 연결 품질 실시간 모니터링

### 중기 (1개월)
- [ ] Mac 버전 지원
- [ ] 오디오 인터페이스 선택 UI
- [ ] 지연 시간 측정 및 표시

### 장기 (필요시)
- [ ] 모바일 앱 (가능할지 검토 필요)
- [ ] 다중 채널 (악기별 분리)
- [ ] 세션 녹음 개선

---

## 어떻게 사용하나요?

### 웹 버전 (지금 바로!)

1. 서버 주소로 접속
2. 회원가입 → 관리자 승인 대기
3. 로그인 → 방 만들기 or 입장
4. 마이크 허용 → 합주 시작!

### 데스크톱 앱 (곧 출시)

1. 설치 파일 다운로드
2. 설치 후 실행
3. 웹 버전과 동일하게 사용
4. 설정에서 "Custom UDP" 모드 선택하면 저지연 모드

---

## 피드백 환영합니다!

사용하면서 불편한 점, 추가됐으면 하는 기능, 버그 등 
언제든 말씀해 주세요. 우리가 쓸 프로그램이니까 우리 입맛에 맞게 만들어요! 🎸🎹🥁🎤

---

*Made with ❤️ for HADES*
